<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 12 生存分析 | Medical Statistics wtih R</title>
  <meta name="description" content="This is a Medical Statistics study notes based on R Markdown and bookdown ." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 12 生存分析 | Medical Statistics wtih R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a Medical Statistics study notes based on R Markdown and bookdown ." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 12 生存分析 | Medical Statistics wtih R" />
  
  <meta name="twitter:description" content="This is a Medical Statistics study notes based on R Markdown and bookdown ." />
  

<meta name="author" content="Wade Wang" />


<meta name="date" content="2021-11-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="泊松回归模型.html"/>
<link rel="next" href="cox比例风险模型.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Medical Statistics wtih R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="统计描述与基础统计分析方法.html"><a href="统计描述与基础统计分析方法.html"><i class="fa fa-check"></i><b>1</b> <strong>统计描述与基础统计分析方法</strong></a>
<ul>
<li class="chapter" data-level="1.1" data-path="统计描述与基础统计分析方法.html"><a href="统计描述与基础统计分析方法.html#描述性统计分析"><i class="fa fa-check"></i><b>1.1</b> 描述性统计分析</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="统计描述与基础统计分析方法.html"><a href="统计描述与基础统计分析方法.html#单组数据汇总统计量"><i class="fa fa-check"></i><b>1.1.1</b> 单组数据汇总统计量</a></li>
<li class="chapter" data-level="1.1.2" data-path="统计描述与基础统计分析方法.html"><a href="统计描述与基础统计分析方法.html#数据分布类型的图形描述"><i class="fa fa-check"></i><b>1.1.2</b> 数据分布类型的图形描述</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="统计描述与基础统计分析方法.html"><a href="统计描述与基础统计分析方法.html#线性相关与秩相关分析"><i class="fa fa-check"></i><b>1.2</b> <strong>线性相关与秩相关分析</strong></a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="统计描述与基础统计分析方法.html"><a href="统计描述与基础统计分析方法.html#三种相关系数"><i class="fa fa-check"></i><b>1.2.1</b> 三种相关系数</a></li>
<li class="chapter" data-level="1.2.2" data-path="统计描述与基础统计分析方法.html"><a href="统计描述与基础统计分析方法.html#相关系数的显著性检验"><i class="fa fa-check"></i><b>1.2.2</b> 相关系数的显著性检验</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="统计描述与基础统计分析方法.html"><a href="统计描述与基础统计分析方法.html#组间差异t检验"><i class="fa fa-check"></i><b>1.3</b> <strong>组间差异t检验</strong></a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="统计描述与基础统计分析方法.html"><a href="统计描述与基础统计分析方法.html#单样本t检验"><i class="fa fa-check"></i><b>1.3.1</b> 单样本t检验</a></li>
<li class="chapter" data-level="1.3.2" data-path="统计描述与基础统计分析方法.html"><a href="统计描述与基础统计分析方法.html#两样本t检验"><i class="fa fa-check"></i><b>1.3.2</b> 两样本t检验</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="统计描述与基础统计分析方法.html"><a href="统计描述与基础统计分析方法.html#组间差异秩和检验"><i class="fa fa-check"></i><b>1.4</b> 组间差异秩和检验</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="统计描述与基础统计分析方法.html"><a href="统计描述与基础统计分析方法.html#单样本wilcoxon符号秩检验"><i class="fa fa-check"></i><b>1.4.1</b> 单样本Wilcoxon符号秩检验</a></li>
<li class="chapter" data-level="1.4.2" data-path="统计描述与基础统计分析方法.html"><a href="统计描述与基础统计分析方法.html#两组的比较"><i class="fa fa-check"></i><b>1.4.2</b> 两组的比较</a></li>
<li class="chapter" data-level="1.4.3" data-path="统计描述与基础统计分析方法.html"><a href="统计描述与基础统计分析方法.html#配对wilcoxon符号秩检验"><i class="fa fa-check"></i><b>1.4.3</b> 配对Wilcoxon符号秩检验</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="方差分析与秩和kruskal-wallis检验.html"><a href="方差分析与秩和kruskal-wallis检验.html"><i class="fa fa-check"></i><b>2</b> <strong>方差分析与秩和Kruskal-Wallis检验</strong></a>
<ul>
<li class="chapter" data-level="2.1" data-path="方差分析与秩和kruskal-wallis检验.html"><a href="方差分析与秩和kruskal-wallis检验.html#方差分析概述"><i class="fa fa-check"></i><b>2.1</b> 方差分析概述</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="方差分析与秩和kruskal-wallis检验.html"><a href="方差分析与秩和kruskal-wallis检验.html#方差分析基本思想"><i class="fa fa-check"></i><b>2.1.1</b> 方差分析基本思想</a></li>
<li class="chapter" data-level="2.1.2" data-path="方差分析与秩和kruskal-wallis检验.html"><a href="方差分析与秩和kruskal-wallis检验.html#方差分析用途"><i class="fa fa-check"></i><b>2.1.2</b> 方差分析用途</a></li>
<li class="chapter" data-level="2.1.3" data-path="方差分析与秩和kruskal-wallis检验.html"><a href="方差分析与秩和kruskal-wallis检验.html#方差分应用条件"><i class="fa fa-check"></i><b>2.1.3</b> 方差分应用条件</a></li>
<li class="chapter" data-level="2.1.4" data-path="方差分析与秩和kruskal-wallis检验.html"><a href="方差分析与秩和kruskal-wallis检验.html#方差分析的r语言实现"><i class="fa fa-check"></i><b>2.1.4</b> 方差分析的R语言实现</a></li>
<li class="chapter" data-level="2.1.5" data-path="方差分析与秩和kruskal-wallis检验.html"><a href="方差分析与秩和kruskal-wallis检验.html#表达式中各项的顺序"><i class="fa fa-check"></i><b>2.1.5</b> 表达式中各项的顺序</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="方差分析与秩和kruskal-wallis检验.html"><a href="方差分析与秩和kruskal-wallis检验.html#单因素方差分析"><i class="fa fa-check"></i><b>2.2</b> 单因素方差分析</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="方差分析与秩和kruskal-wallis检验.html"><a href="方差分析与秩和kruskal-wallis检验.html#多重比较"><i class="fa fa-check"></i><b>2.2.1</b> 多重比较</a></li>
<li class="chapter" data-level="2.2.2" data-path="方差分析与秩和kruskal-wallis检验.html"><a href="方差分析与秩和kruskal-wallis检验.html#评估方差分析的假设条件"><i class="fa fa-check"></i><b>2.2.2</b> 评估方差分析的假设条件</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="方差分析与秩和kruskal-wallis检验.html"><a href="方差分析与秩和kruskal-wallis检验.html#双因素方差分析"><i class="fa fa-check"></i><b>2.3</b> 双因素方差分析</a></li>
<li class="chapter" data-level="2.4" data-path="方差分析与秩和kruskal-wallis检验.html"><a href="方差分析与秩和kruskal-wallis检验.html#重复测量的方差分析"><i class="fa fa-check"></i><b>2.4</b> 重复测量的方差分析</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="方差分析与秩和kruskal-wallis检验.html"><a href="方差分析与秩和kruskal-wallis检验.html#概述"><i class="fa fa-check"></i><b>2.4.1</b> 概述</a></li>
<li class="chapter" data-level="2.4.2" data-path="方差分析与秩和kruskal-wallis检验.html"><a href="方差分析与秩和kruskal-wallis检验.html#原理"><i class="fa fa-check"></i><b>2.4.2</b> 原理</a></li>
<li class="chapter" data-level="2.4.3" data-path="方差分析与秩和kruskal-wallis检验.html"><a href="方差分析与秩和kruskal-wallis检验.html#应用条件"><i class="fa fa-check"></i><b>2.4.3</b> 应用条件</a></li>
<li class="chapter" data-level="2.4.4" data-path="方差分析与秩和kruskal-wallis检验.html"><a href="方差分析与秩和kruskal-wallis检验.html#案例1"><i class="fa fa-check"></i><b>2.4.4</b> 案例1</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="方差分析与秩和kruskal-wallis检验.html"><a href="方差分析与秩和kruskal-wallis检验.html#注意"><i class="fa fa-check"></i><b>2.5</b> 注意</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="列联表资料的处理.html"><a href="列联表资料的处理.html"><i class="fa fa-check"></i><b>3</b> <strong>列联表资料的处理</strong></a>
<ul>
<li class="chapter" data-level="3.1" data-path="列联表资料的处理.html"><a href="列联表资料的处理.html#rc表分类"><i class="fa fa-check"></i><b>3.1</b> R×C表分类</a></li>
<li class="chapter" data-level="3.2" data-path="列联表资料的处理.html"><a href="列联表资料的处理.html#列变量为有序变量的行均分检验cochran-mantel-haenszel"><i class="fa fa-check"></i><b>3.2</b> 列变量为有序变量的行均分检验（Cochran-Mantel-Haenszel）</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="列联表资料的处理.html"><a href="列联表资料的处理.html#行均分检验cochran-mantel-haenszel"><i class="fa fa-check"></i><b>3.2.1</b> 行均分检验Cochran-Mantel-Haenszel</a></li>
<li class="chapter" data-level="3.2.2" data-path="列联表资料的处理.html"><a href="列联表资料的处理.html#ordinal-logistic回归模型"><i class="fa fa-check"></i><b>3.2.2</b> Ordinal logistic回归模型</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="列联表资料的处理.html"><a href="列联表资料的处理.html#行列变量均为有序变量检验方法"><i class="fa fa-check"></i><b>3.3</b> 行列变量均为有序变量检验方法</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="列联表资料的处理.html"><a href="列联表资料的处理.html#sperman秩相关"><i class="fa fa-check"></i><b>3.3.1</b> sperman秩相关</a></li>
<li class="chapter" data-level="3.3.2" data-path="列联表资料的处理.html"><a href="列联表资料的处理.html#线性趋势检验"><i class="fa fa-check"></i><b>3.3.2</b> 线性趋势检验</a></li>
<li class="chapter" data-level="3.3.3" data-path="列联表资料的处理.html"><a href="列联表资料的处理.html#一致性检验"><i class="fa fa-check"></i><b>3.3.3</b> 一致性检验</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="列联表资料的处理.html"><a href="列联表资料的处理.html#分层行列表分析-mantel-haenszel-检验"><i class="fa fa-check"></i><b>3.4</b> 分层行列表分析 Mantel-Haenszel 检验</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="列联表资料的处理.html"><a href="列联表资料的处理.html#mantel-haenszel-检验"><i class="fa fa-check"></i><b>3.4.1</b> Mantel-Haenszel 检验</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="秩和检验处理列联表资料.html"><a href="秩和检验处理列联表资料.html"><i class="fa fa-check"></i><b>4</b> <strong>秩和检验处理列联表资料</strong></a>
<ul>
<li class="chapter" data-level="4.1" data-path="秩和检验处理列联表资料.html"><a href="秩和检验处理列联表资料.html#等级分组资料的非参数检验"><i class="fa fa-check"></i><b>4.1</b> 等级分组资料的非参数检验</a></li>
<li class="chapter" data-level="4.2" data-path="秩和检验处理列联表资料.html"><a href="秩和检验处理列联表资料.html#多个组的等级指标的非参数检验"><i class="fa fa-check"></i><b>4.2</b> 多个组的等级指标的非参数检验</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="简单线性回归.html"><a href="简单线性回归.html"><i class="fa fa-check"></i><b>5</b> <strong>简单线性回归</strong></a>
<ul>
<li class="chapter" data-level="5.1" data-path="简单线性回归.html"><a href="简单线性回归.html#回归分析对资料的要求"><i class="fa fa-check"></i><b>5.1</b> 回归分析对资料的要求</a></li>
<li class="chapter" data-level="5.2" data-path="简单线性回归.html"><a href="简单线性回归.html#直线回归方程"><i class="fa fa-check"></i><b>5.2</b> 直线回归方程</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="简单线性回归.html"><a href="简单线性回归.html#直线回归方程的建立"><i class="fa fa-check"></i><b>5.2.1</b> 直线回归方程的建立</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="简单线性回归.html"><a href="简单线性回归.html#回归系数b的统计学意义"><i class="fa fa-check"></i><b>5.3</b> 回归系数b的统计学意义</a></li>
<li class="chapter" data-level="5.4" data-path="简单线性回归.html"><a href="简单线性回归.html#回归分析的步骤"><i class="fa fa-check"></i><b>5.4</b> 回归分析的步骤</a></li>
<li class="chapter" data-level="5.5" data-path="简单线性回归.html"><a href="简单线性回归.html#y的离均差平方和的划分"><i class="fa fa-check"></i><b>5.5</b> Y的离均差平方和的划分</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="简单线性回归.html"><a href="简单线性回归.html#三种平方和的关系"><i class="fa fa-check"></i><b>5.5.1</b> 三种平方和的关系</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="简单线性回归.html"><a href="简单线性回归.html#三种平方和的意义"><i class="fa fa-check"></i><b>5.6</b> 三种平方和的意义</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="简单线性回归.html"><a href="简单线性回归.html#三种平方和的自由度及其关系"><i class="fa fa-check"></i><b>5.6.1</b> 三种平方和的自由度及其关系</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="简单线性回归.html"><a href="简单线性回归.html#应用回归分析应注意的问题"><i class="fa fa-check"></i><b>5.7</b> 应用回归分析应注意的问题</a></li>
<li class="chapter" data-level="5.8" data-path="简单线性回归.html"><a href="简单线性回归.html#简单线性回归的r语言实现"><i class="fa fa-check"></i><b>5.8</b> 简单线性回归的R语言实现</a></li>
<li class="chapter" data-level="5.9" data-path="简单线性回归.html"><a href="简单线性回归.html#案例-1"><i class="fa fa-check"></i><b>5.9</b> 案例 1</a></li>
<li class="chapter" data-level="5.10" data-path="简单线性回归.html"><a href="简单线性回归.html#案例-2"><i class="fa fa-check"></i><b>5.10</b> 案例 2</a></li>
<li class="chapter" data-level="5.11" data-path="简单线性回归.html"><a href="简单线性回归.html#案例-3"><i class="fa fa-check"></i><b>5.11</b> 案例 3</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="残差与回归值预测域与置信带.html"><a href="残差与回归值预测域与置信带.html"><i class="fa fa-check"></i><b>6</b> 残差与回归值&amp;预测域与置信带</a></li>
<li class="chapter" data-level="7" data-path="多元线性回归.html"><a href="多元线性回归.html"><i class="fa fa-check"></i><b>7</b> <strong>多元线性回归</strong></a>
<ul>
<li class="chapter" data-level="7.1" data-path="多元线性回归.html"><a href="多元线性回归.html#多元线性回归模型"><i class="fa fa-check"></i><b>7.1</b> 多元线性回归模型</a></li>
<li class="chapter" data-level="7.2" data-path="多元线性回归.html"><a href="多元线性回归.html#回归模型的应用条件"><i class="fa fa-check"></i><b>7.2</b> 回归模型的应用条件</a></li>
<li class="chapter" data-level="7.3" data-path="多元线性回归.html"><a href="多元线性回归.html#偏回归系数的估计"><i class="fa fa-check"></i><b>7.3</b> 偏回归系数的估计</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="多元线性回归.html"><a href="多元线性回归.html#回归方程的假设检验"><i class="fa fa-check"></i><b>7.3.1</b> 回归方程的假设检验</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="多元线性回归.html"><a href="多元线性回归.html#案例一"><i class="fa fa-check"></i><b>7.4</b> 案例一</a></li>
<li class="chapter" data-level="7.5" data-path="多元线性回归.html"><a href="多元线性回归.html#案例二"><i class="fa fa-check"></i><b>7.5</b> 案例二</a></li>
<li class="chapter" data-level="7.6" data-path="多元线性回归.html"><a href="多元线性回归.html#用线性回归来做anova"><i class="fa fa-check"></i><b>7.6</b> 用线性回归来做ANOVA</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="诊断试验的roc分析.html"><a href="诊断试验的roc分析.html"><i class="fa fa-check"></i><b>8</b> <strong>诊断试验的ROC分析</strong></a>
<ul>
<li class="chapter" data-level="8.1" data-path="诊断试验的roc分析.html"><a href="诊断试验的roc分析.html#诊断试验设计原理"><i class="fa fa-check"></i><b>8.1</b> 诊断试验设计原理</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="诊断试验的roc分析.html"><a href="诊断试验的roc分析.html#队列研究设计"><i class="fa fa-check"></i><b>8.1.1</b> 队列研究设计</a></li>
<li class="chapter" data-level="8.1.2" data-path="诊断试验的roc分析.html"><a href="诊断试验的roc分析.html#横断面设计单门设计"><i class="fa fa-check"></i><b>8.1.2</b> 横断面设计/单门设计</a></li>
<li class="chapter" data-level="8.1.3" data-path="诊断试验的roc分析.html"><a href="诊断试验的roc分析.html#病例对照设计双门设计"><i class="fa fa-check"></i><b>8.1.3</b> 病例对照设计/双门设计</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="诊断试验的roc分析.html"><a href="诊断试验的roc分析.html#诊断试验的统计指标"><i class="fa fa-check"></i><b>8.2</b> 诊断试验的统计指标</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="诊断试验的roc分析.html"><a href="诊断试验的roc分析.html#基本概念"><i class="fa fa-check"></i><b>8.2.1</b> 基本概念</a></li>
<li class="chapter" data-level="8.2.2" data-path="诊断试验的roc分析.html"><a href="诊断试验的roc分析.html#灵敏度和特异度之间的权衡"><i class="fa fa-check"></i><b>8.2.2</b> 灵敏度和特异度之间的权衡</a></li>
<li class="chapter" data-level="8.2.3" data-path="诊断试验的roc分析.html"><a href="诊断试验的roc分析.html#受试者工作特征曲线-roc"><i class="fa fa-check"></i><b>8.2.3</b> 受试者工作特征曲线 (ROC)</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="诊断试验的roc分析.html"><a href="诊断试验的roc分析.html#roc分析的r语言实现"><i class="fa fa-check"></i><b>8.3</b> ROC分析的R语言实现</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="诊断试验的roc分析.html"><a href="诊断试验的roc分析.html#案例1-1"><i class="fa fa-check"></i><b>8.3.1</b> 案例1</a></li>
<li class="chapter" data-level="8.3.2" data-path="诊断试验的roc分析.html"><a href="诊断试验的roc分析.html#案例2"><i class="fa fa-check"></i><b>8.3.2</b> 案例2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="logistic回归.html"><a href="logistic回归.html"><i class="fa fa-check"></i><b>9</b> <strong>Logistic回归</strong></a>
<ul>
<li class="chapter" data-level="9.1" data-path="logistic回归.html"><a href="logistic回归.html#模型概述"><i class="fa fa-check"></i><b>9.1</b> 模型概述</a></li>
<li class="chapter" data-level="9.2" data-path="logistic回归.html"><a href="logistic回归.html#模型结构"><i class="fa fa-check"></i><b>9.2</b> 模型结构</a></li>
<li class="chapter" data-level="9.3" data-path="logistic回归.html"><a href="logistic回归.html#比值比或优势比or"><i class="fa fa-check"></i><b>9.3</b> 比值比或优势比（OR）</a></li>
<li class="chapter" data-level="9.4" data-path="logistic回归.html"><a href="logistic回归.html#案例1-2"><i class="fa fa-check"></i><b>9.4</b> 案例1</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="logistic回归.html"><a href="logistic回归.html#评价预测变量对结果概率的影响"><i class="fa fa-check"></i><b>9.4.1</b> 评价预测变量对结果概率的影响</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="logistic回归.html"><a href="logistic回归.html#案例2-1"><i class="fa fa-check"></i><b>9.5</b> 案例2</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="logistic回归.html"><a href="logistic回归.html#因素间的交互作用"><i class="fa fa-check"></i><b>9.5.1</b> 因素间的交互作用</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="logistic回归.html"><a href="logistic回归.html#案例-3-1"><i class="fa fa-check"></i><b>9.6</b> 案例 3</a></li>
<li class="chapter" data-level="9.7" data-path="logistic回归.html"><a href="logistic回归.html#案例4"><i class="fa fa-check"></i><b>9.7</b> 案例4</a></li>
<li class="chapter" data-level="9.8" data-path="logistic回归.html"><a href="logistic回归.html#扩展的logistic回归及其变种"><i class="fa fa-check"></i><b>9.8</b> 扩展的Logistic回归及其变种</a>
<ul>
<li class="chapter" data-level="9.8.1" data-path="logistic回归.html"><a href="logistic回归.html#稳健logistic回归"><i class="fa fa-check"></i><b>9.8.1</b> 稳健Logistic回归</a></li>
<li class="chapter" data-level="9.8.2" data-path="logistic回归.html"><a href="logistic回归.html#多项分布回归"><i class="fa fa-check"></i><b>9.8.2</b> 多项分布回归</a></li>
<li class="chapter" data-level="9.8.3" data-path="logistic回归.html"><a href="logistic回归.html#序数logistic回归"><i class="fa fa-check"></i><b>9.8.3</b> 序数Logistic回归</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="logistic回归模型.html"><a href="logistic回归模型.html"><i class="fa fa-check"></i><b>10</b> <strong>Logistic回归模型</strong></a>
<ul>
<li class="chapter" data-level="10.1" data-path="logistic回归模型.html"><a href="logistic回归模型.html#临床预测模型的本质"><i class="fa fa-check"></i><b>10.1</b> 临床预测模型的本质</a></li>
<li class="chapter" data-level="10.2" data-path="logistic回归模型.html"><a href="logistic回归模型.html#临床预测模型建立"><i class="fa fa-check"></i><b>10.2</b> 临床预测模型建立</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="logistic回归模型.html"><a href="logistic回归模型.html#验证步骤"><i class="fa fa-check"></i><b>10.2.1</b> 验证步骤</a></li>
<li class="chapter" data-level="10.2.2" data-path="logistic回归模型.html"><a href="logistic回归模型.html#研究思路"><i class="fa fa-check"></i><b>10.2.2</b> 研究思路</a></li>
<li class="chapter" data-level="10.2.3" data-path="logistic回归模型.html"><a href="logistic回归模型.html#预测类案例研究思路总结"><i class="fa fa-check"></i><b>10.2.3</b> 预测类案例研究思路总结</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="logistic回归模型.html"><a href="logistic回归模型.html#案例1-3"><i class="fa fa-check"></i><b>10.3</b> 案例1</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="logistic回归模型.html"><a href="logistic回归模型.html#变量筛选"><i class="fa fa-check"></i><b>10.3.1</b> 变量筛选</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="logistic回归模型.html"><a href="logistic回归模型.html#列线图及校正曲线的绘制"><i class="fa fa-check"></i><b>10.4</b> 列线图及校正曲线的绘制</a></li>
<li class="chapter" data-level="10.5" data-path="logistic回归模型.html"><a href="logistic回归模型.html#c-statistics-计算"><i class="fa fa-check"></i><b>10.5</b> C-Statistics 计算</a></li>
<li class="chapter" data-level="10.6" data-path="logistic回归模型.html"><a href="logistic回归模型.html#亚组分析森林图的绘制"><i class="fa fa-check"></i><b>10.6</b> 亚组分析森林图的绘制</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="logistic回归模型.html"><a href="logistic回归模型.html#数据录入"><i class="fa fa-check"></i><b>10.6.1</b> 数据录入</a></li>
<li class="chapter" data-level="10.6.2" data-path="logistic回归模型.html"><a href="logistic回归模型.html#绘制图形"><i class="fa fa-check"></i><b>10.6.2</b> 绘制图形</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="泊松回归模型.html"><a href="泊松回归模型.html"><i class="fa fa-check"></i><b>11</b> <strong>泊松回归模型</strong></a>
<ul>
<li class="chapter" data-level="11.1" data-path="泊松回归模型.html"><a href="泊松回归模型.html#拟合泊松回归"><i class="fa fa-check"></i><b>11.1</b> 拟合泊松回归</a></li>
<li class="chapter" data-level="11.2" data-path="泊松回归模型.html"><a href="泊松回归模型.html#解释模型参数"><i class="fa fa-check"></i><b>11.2</b> 解释模型参数</a></li>
<li class="chapter" data-level="11.3" data-path="泊松回归模型.html"><a href="泊松回归模型.html#过度离势"><i class="fa fa-check"></i><b>11.3</b> 过度离势</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="生存分析.html"><a href="生存分析.html"><i class="fa fa-check"></i><b>12</b> <strong>生存分析</strong></a>
<ul>
<li class="chapter" data-level="12.1" data-path="生存分析.html"><a href="生存分析.html#生存资料的描述"><i class="fa fa-check"></i><b>12.1</b> 生存资料的描述</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="生存分析.html"><a href="生存分析.html#生存分析方法的正确表达"><i class="fa fa-check"></i><b>12.1.1</b> 生存分析方法的正确表达</a></li>
<li class="chapter" data-level="12.1.2" data-path="生存分析.html"><a href="生存分析.html#生存分析的基本概念"><i class="fa fa-check"></i><b>12.1.2</b> 生存分析的基本概念</a></li>
<li class="chapter" data-level="12.1.3" data-path="生存分析.html"><a href="生存分析.html#生存分析的几个重要名词"><i class="fa fa-check"></i><b>12.1.3</b> 生存分析的几个重要名词</a></li>
<li class="chapter" data-level="12.1.4" data-path="生存分析.html"><a href="生存分析.html#生存数据的两种类型"><i class="fa fa-check"></i><b>12.1.4</b> 生存数据的两种类型</a></li>
<li class="chapter" data-level="12.1.5" data-path="生存分析.html"><a href="生存分析.html#生存分析的主要任务"><i class="fa fa-check"></i><b>12.1.5</b> 生存分析的主要任务</a></li>
<li class="chapter" data-level="12.1.6" data-path="生存分析.html"><a href="生存分析.html#生存分析基本方法"><i class="fa fa-check"></i><b>12.1.6</b> 生存分析基本方法</a></li>
<li class="chapter" data-level="12.1.7" data-path="生存分析.html"><a href="生存分析.html#随访研究的几个问题"><i class="fa fa-check"></i><b>12.1.7</b> 随访研究的几个问题</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="生存分析.html"><a href="生存分析.html#生存率的估计与生存曲线"><i class="fa fa-check"></i><b>12.2</b> 生存率的估计与生存曲线</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="生存分析.html"><a href="生存分析.html#kaplan-meier法"><i class="fa fa-check"></i><b>12.2.1</b> Kaplan-Meier法</a></li>
<li class="chapter" data-level="12.2.2" data-path="生存分析.html"><a href="生存分析.html#寿命表法"><i class="fa fa-check"></i><b>12.2.2</b> 寿命表法</a></li>
<li class="chapter" data-level="12.2.3" data-path="生存分析.html"><a href="生存分析.html#生存分析对生存资料的基本要求"><i class="fa fa-check"></i><b>12.2.3</b> 生存分析对生存资料的基本要求</a></li>
<li class="chapter" data-level="12.2.4" data-path="生存分析.html"><a href="生存分析.html#kaplan-meier法估计案例"><i class="fa fa-check"></i><b>12.2.4</b> Kaplan-Meier法估计案例</a></li>
<li class="chapter" data-level="12.2.5" data-path="生存分析.html"><a href="生存分析.html#lifetable寿命表法"><i class="fa fa-check"></i><b>12.2.5</b> LifeTable寿命表法</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="生存分析.html"><a href="生存分析.html#组间生存曲线的比较"><i class="fa fa-check"></i><b>12.3</b> 组间生存曲线的比较</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="生存分析.html"><a href="生存分析.html#log-rank检验"><i class="fa fa-check"></i><b>12.3.1</b> Log-rank检验</a></li>
<li class="chapter" data-level="12.3.2" data-path="生存分析.html"><a href="生存分析.html#案例1-4"><i class="fa fa-check"></i><b>12.3.2</b> 案例1</a></li>
<li class="chapter" data-level="12.3.3" data-path="生存分析.html"><a href="生存分析.html#案例2-2"><i class="fa fa-check"></i><b>12.3.3</b> 案例2</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="生存分析.html"><a href="生存分析.html#画一幅高水准的生存曲线"><i class="fa fa-check"></i><b>12.4</b> 画一幅高水准的生存曲线</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="cox比例风险模型.html"><a href="cox比例风险模型.html"><i class="fa fa-check"></i><b>13</b> <strong>COX比例风险模型</strong></a>
<ul>
<li class="chapter" data-level="13.1" data-path="cox比例风险模型.html"><a href="cox比例风险模型.html#模型简介"><i class="fa fa-check"></i><b>13.1</b> <strong>模型简介</strong></a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="cox比例风险模型.html"><a href="cox比例风险模型.html#cox模型的基本结构"><i class="fa fa-check"></i><b>13.1.1</b> COX模型的基本结构</a></li>
<li class="chapter" data-level="13.1.2" data-path="cox比例风险模型.html"><a href="cox比例风险模型.html#cox回归模型的构建"><i class="fa fa-check"></i><b>13.1.2</b> COX回归模型的构建</a></li>
<li class="chapter" data-level="13.1.3" data-path="cox比例风险模型.html"><a href="cox比例风险模型.html#cox回归模型的主要用途"><i class="fa fa-check"></i><b>13.1.3</b> COX回归模型的主要用途</a></li>
<li class="chapter" data-level="13.1.4" data-path="cox比例风险模型.html"><a href="cox比例风险模型.html#cox回归模型的应用条件"><i class="fa fa-check"></i><b>13.1.4</b> COX回归模型的应用条件</a></li>
<li class="chapter" data-level="13.1.5" data-path="cox比例风险模型.html"><a href="cox比例风险模型.html#cox回归分析的假设检验"><i class="fa fa-check"></i><b>13.1.5</b> COX回归分析的假设检验</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="cox比例风险模型.html"><a href="cox比例风险模型.html#cox分析的一般步骤"><i class="fa fa-check"></i><b>13.2</b> COX分析的一般步骤</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="cox比例风险模型.html"><a href="cox比例风险模型.html#收集资料"><i class="fa fa-check"></i><b>13.2.1</b> 收集资料</a></li>
<li class="chapter" data-level="13.2.2" data-path="cox比例风险模型.html"><a href="cox比例风险模型.html#因子初步筛选"><i class="fa fa-check"></i><b>13.2.2</b> 因子初步筛选</a></li>
<li class="chapter" data-level="13.2.3" data-path="cox比例风险模型.html"><a href="cox比例风险模型.html#拟合多因素模型"><i class="fa fa-check"></i><b>13.2.3</b> 拟合多因素模型</a></li>
<li class="chapter" data-level="13.2.4" data-path="cox比例风险模型.html"><a href="cox比例风险模型.html#结果解析与评价"><i class="fa fa-check"></i><b>13.2.4</b> 结果解析与评价</a></li>
<li class="chapter" data-level="13.2.5" data-path="cox比例风险模型.html"><a href="cox比例风险模型.html#标准回归系数的计算方法"><i class="fa fa-check"></i><b>13.2.5</b> 标准回归系数的计算方法</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="cox比例风险模型.html"><a href="cox比例风险模型.html#案例"><i class="fa fa-check"></i><b>13.3</b> <strong>案例</strong></a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="cox比例风险模型.html"><a href="cox比例风险模型.html#案例1-5"><i class="fa fa-check"></i><b>13.3.1</b> 案例1</a></li>
<li class="chapter" data-level="13.3.2" data-path="cox比例风险模型.html"><a href="cox比例风险模型.html#案例2-3"><i class="fa fa-check"></i><b>13.3.2</b> 案例2</a></li>
<li class="chapter" data-level="13.3.3" data-path="cox比例风险模型.html"><a href="cox比例风险模型.html#案例3"><i class="fa fa-check"></i><b>13.3.3</b> 案例3</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="cox比例风险模型.html"><a href="cox比例风险模型.html#列线图绘制"><i class="fa fa-check"></i><b>13.4</b> 列线图绘制</a></li>
<li class="chapter" data-level="13.5" data-path="cox比例风险模型.html"><a href="cox比例风险模型.html#亚组分析森林图的绘制-1"><i class="fa fa-check"></i><b>13.5</b> 亚组分析森林图的绘制</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="竞争风险模型.html"><a href="竞争风险模型.html"><i class="fa fa-check"></i><b>14</b> <strong>竞争风险模型</strong></a>
<ul>
<li class="chapter" data-level="14.1" data-path="竞争风险模型.html"><a href="竞争风险模型.html#竞争风险的概念"><i class="fa fa-check"></i><b>14.1</b> 竞争风险的概念</a></li>
<li class="chapter" data-level="14.2" data-path="竞争风险模型.html"><a href="竞争风险模型.html#单因素竞争风险模型"><i class="fa fa-check"></i><b>14.2</b> 单因素竞争风险模型</a></li>
<li class="chapter" data-level="14.3" data-path="竞争风险模型.html"><a href="竞争风险模型.html#多因素竞争风险模型"><i class="fa fa-check"></i><b>14.3</b> 多因素竞争风险模型</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="主成分分析.html"><a href="主成分分析.html"><i class="fa fa-check"></i><b>15</b> <strong>主成分分析</strong></a>
<ul>
<li class="chapter" data-level="15.1" data-path="主成分分析.html"><a href="主成分分析.html#概述-1"><i class="fa fa-check"></i><b>15.1</b> 概述</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="主成分分析.html"><a href="主成分分析.html#基本思想"><i class="fa fa-check"></i><b>15.1.1</b> 基本思想</a></li>
<li class="chapter" data-level="15.1.2" data-path="主成分分析.html"><a href="主成分分析.html#模型示意图"><i class="fa fa-check"></i><b>15.1.2</b> 模型示意图</a></li>
<li class="chapter" data-level="15.1.3" data-path="主成分分析.html"><a href="主成分分析.html#主成分分析基本思想应用"><i class="fa fa-check"></i><b>15.1.3</b> 主成分分析基本思想应用</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="主成分分析.html"><a href="主成分分析.html#主成分分析的数学模型"><i class="fa fa-check"></i><b>15.2</b> 主成分分析的数学模型</a></li>
<li class="chapter" data-level="15.3" data-path="主成分分析.html"><a href="主成分分析.html#pca的r语言实现"><i class="fa fa-check"></i><b>15.3</b> PCA的R语言实现</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="主成分分析.html"><a href="主成分分析.html#psych包中的函数"><i class="fa fa-check"></i><b>15.3.1</b> psych包中的函数</a></li>
<li class="chapter" data-level="15.3.2" data-path="主成分分析.html"><a href="主成分分析.html#主成分与因子分析的一般步骤"><i class="fa fa-check"></i><b>15.3.2</b> 主成分与因子分析的一般步骤</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="主成分分析.html"><a href="主成分分析.html#案例-4"><i class="fa fa-check"></i><b>15.4</b> 案例</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="主成分分析.html"><a href="主成分分析.html#案例1-6"><i class="fa fa-check"></i><b>15.4.1</b> 案例1</a></li>
<li class="chapter" data-level="15.4.2" data-path="主成分分析.html"><a href="主成分分析.html#案例-2-1"><i class="fa fa-check"></i><b>15.4.2</b> 案例 2</a></li>
<li class="chapter" data-level="15.4.3" data-path="主成分分析.html"><a href="主成分分析.html#案例3在线性回归中的应用"><i class="fa fa-check"></i><b>15.4.3</b> 案例3——在线性回归中的应用</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="探索性因子分析.html"><a href="探索性因子分析.html"><i class="fa fa-check"></i><b>16</b> <strong>探索性因子分析</strong></a>
<ul>
<li class="chapter" data-level="16.1" data-path="探索性因子分析.html"><a href="探索性因子分析.html#因子分析"><i class="fa fa-check"></i><b>16.1</b> 因子分析</a></li>
<li class="chapter" data-level="16.2" data-path="探索性因子分析.html"><a href="探索性因子分析.html#因子分析模型形式"><i class="fa fa-check"></i><b>16.2</b> 因子分析模型形式</a></li>
<li class="chapter" data-level="16.3" data-path="探索性因子分析.html"><a href="探索性因子分析.html#因子分析的r语言实现"><i class="fa fa-check"></i><b>16.3</b> 因子分析的R语言实现</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="探索性因子分析.html"><a href="探索性因子分析.html#判断需提取的公共因子数"><i class="fa fa-check"></i><b>16.3.1</b> 判断需提取的公共因子数</a></li>
<li class="chapter" data-level="16.3.2" data-path="探索性因子分析.html"><a href="探索性因子分析.html#提取公共因子"><i class="fa fa-check"></i><b>16.3.2</b> 提取公共因子</a></li>
<li class="chapter" data-level="16.3.3" data-path="探索性因子分析.html"><a href="探索性因子分析.html#因子旋转"><i class="fa fa-check"></i><b>16.3.3</b> 因子旋转</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="探索性因子分析.html"><a href="探索性因子分析.html#因子分析应用案例"><i class="fa fa-check"></i><b>16.4</b> 因子分析应用案例</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="聚类分析.html"><a href="聚类分析.html"><i class="fa fa-check"></i><b>17</b> <strong>聚类分析</strong></a>
<ul>
<li class="chapter" data-level="17.1" data-path="聚类分析.html"><a href="聚类分析.html#概述-2"><i class="fa fa-check"></i><b>17.1</b> 概述</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="聚类分析.html"><a href="聚类分析.html#聚类的定义"><i class="fa fa-check"></i><b>17.1.1</b> 聚类的定义</a></li>
<li class="chapter" data-level="17.1.2" data-path="聚类分析.html"><a href="聚类分析.html#两种聚类分析"><i class="fa fa-check"></i><b>17.1.2</b> 两种聚类分析</a></li>
<li class="chapter" data-level="17.1.3" data-path="聚类分析.html"><a href="聚类分析.html#聚类分析的一般步骤"><i class="fa fa-check"></i><b>17.1.3</b> 聚类分析的一般步骤</a></li>
<li class="chapter" data-level="17.1.4" data-path="聚类分析.html"><a href="聚类分析.html#计算距离"><i class="fa fa-check"></i><b>17.1.4</b> 计算距离</a></li>
<li class="chapter" data-level="17.1.5" data-path="聚类分析.html"><a href="聚类分析.html#层次聚类分析"><i class="fa fa-check"></i><b>17.1.5</b> 层次聚类分析</a></li>
<li class="chapter" data-level="17.1.6" data-path="聚类分析.html"><a href="聚类分析.html#选择聚类的个数"><i class="fa fa-check"></i><b>17.1.6</b> 选择聚类的个数</a></li>
<li class="chapter" data-level="17.1.7" data-path="聚类分析.html"><a href="聚类分析.html#获取最终的聚类方案"><i class="fa fa-check"></i><b>17.1.7</b> 获取最终的聚类方案</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="聚类分析.html"><a href="聚类分析.html#k均值算法"><i class="fa fa-check"></i><b>17.2</b> K均值算法</a></li>
<li class="chapter" data-level="17.3" data-path="聚类分析.html"><a href="聚类分析.html#围绕中心点的划分"><i class="fa fa-check"></i><b>17.3</b> 围绕中心点的划分</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="聚类分析.html"><a href="聚类分析.html#pam算法步骤"><i class="fa fa-check"></i><b>17.3.1</b> PAM算法步骤</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Medical Statistics wtih R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="生存分析" class="section level1" number="12">
<h1><span class="header-section-number">Chapter 12</span> <strong>生存分析</strong></h1>
<div id="生存资料的描述" class="section level2" number="12.1">
<h2><span class="header-section-number">12.1</span> 生存资料的描述</h2>
<div id="生存分析方法的正确表达" class="section level3" number="12.1.1">
<h3><span class="header-section-number">12.1.1</span> 生存分析方法的正确表达</h3>
<p>阅读临床研究文献的时候经常看到如下表述，这其中的统计学方法该何如理解？</p>
<p>➢ Aims compared treatments with respect to time to LR, time to distant
recurrence, RFS, and OS via log-rank and Cox regression methods. Log-rank tests were exact, being based on hypergeometric probabilities. RFS and OS curves were estimated using the Kaplan-Meier method.</p>
<p>➢ Time-to-event curves were estimated by the Kaplan–Meier method and
compared with the use of a two-sided log-rank test.</p>
</div>
<div id="生存分析的基本概念" class="section level3" number="12.1.2">
<h3><span class="header-section-number">12.1.2</span> 生存分析的基本概念</h3>
<p>➢ 生存资料(time to event)的统计方法统称为生存分析，(survival analysis)，它是将事件的结局和发生这种结局所经历的时间两个因素综合起来分析的一种统计方法。它能够处理截尾数据，并对整个生存过程进行分析或比较</p>
</div>
<div id="生存分析的几个重要名词" class="section level3" number="12.1.3">
<h3><span class="header-section-number">12.1.3</span> 生存分析的几个重要名词</h3>
<p>➢ <strong>1. 终点事件:</strong></p>
<p>终点事件 (terminal event)又称失效事件(failure event)或“死亡”事件(deathevent) ，泛指标志某种措施失败或失效的事件或反映治疗效果特征的事件，是根据研究目的确定的。如乳腺癌术后死亡、白血病化疗后复发、肾移植术后的肾衰、术后下床活动等，均可作为“死亡”事件。</p>
<p>➢ 【举例】RFS该如何定义？
字面意思是“无复发生存”，那“结局事件”一般定义为：复发+转移+复发同时转
移+癌症相关死亡，其余为“删失”</p>
<p>➢ <strong>2. 生存时间:</strong></p>
<p>生存时间(survival time)也是一个广义概念，泛指所关心的某现象的持续时间，即
随访观察持续的时间，常用符号t表示</p>
<p>➢ <strong>3. 死亡概率:</strong></p>
<p>死亡概率(probability of death)表示单位时间段开始存活的个体，在
该段时间内死亡的可能性。符号q表示。</p>
<p><span class="math display">\[
q= \cfrac{某年内死亡人数}{某年年初人口数}
\]</span></p>
<p>➢ <strong>4. 生存概率:</strong></p>
<p>生存概率(probability of survival)表示单位时间段开始存活的个体，
到该段时间结束时仍存活的可能性。符号p表示</p>
<p><span class="math display">\[
p=\cfrac{某年活满一年人数}{某年年初人口数}
\]</span></p>
<p><span class="math display">\[
p=1-q
\]</span></p>
<p>➢ <strong>5. 生存率:</strong></p>
<p>生存率(survival rate, survival function)表示观察对象经历tk个单位
时间段后仍存活的可能性。</p>
<p>若无截尾数据，则:</p>
<p><span class="math display">\[
S(t_k)= P(T&gt;t_k) = \cfrac{t_k时刻仍存活的例数}{观察总例数}
\]</span></p>
<p>其中：</p>
<p><span class="math display">\[
0≤S(t)≤1
\]</span></p>
<p>若有截尾数据，须分时段计算生存概率。假定观察对象在各个时段的生存事件独立，应用概率乘法定理：</p>
<p><span class="math display">\[
S(t_k)= P(T&gt;t_k) = p_1 ·p_2 \cdots p_k
\]</span></p>
<p>Pi 是某时段的生存概率，故生存率又称累积生存概率 (Cumulative
Probabilityof Survival)。</p>
<p><strong>生存率与生存概率的区别</strong></p>
<p><img src="fig/81.png" width="430" /></p>
<p>➢ <strong>6. 生存曲线:</strong></p>
<p>生存曲线(survival curve)：生存时间为横轴，将各时点所对应的生
存率连接在一起的曲线图。</p>
<p><img src="fig/82.png" width="312" /><img src="fig/83.png" width="312" /></p>
</div>
<div id="生存数据的两种类型" class="section level3" number="12.1.4">
<h3><span class="header-section-number">12.1.4</span> 生存数据的两种类型</h3>
<p>➢ 完全数据(complete data)：指从观察起点到发生“死亡”事件所经历的时
间。提供了观察对象确切的生存时间。</p>
<p>➢ 截尾数据(censored data)：亦称截尾值(censored value)或终检值。指从
观察起点到发生非“死亡”事件所经历的时间。</p>
<p><strong>截尾原因大致有三种情况：</strong></p>
<p>➢ 失访：未继续就诊、拒绝访问或搬迁而失去联系。</p>
<p>➢ 死于与研究疾病无关的原因：由于其他原因死亡。</p>
<p>➢ 研究终止：研究结束时终点事件尚未发生。</p>
<p>➢ 截尾数据不能提供完全的信息，真实的生存时间未知，只知道比观察到的截尾时间长，常用符号“＋”表示</p>
<p><strong>生存资料的特点：</strong></p>
<p>➢ 有生存结局、生存时间</p>
<p>➢ 有不确定数据（截尾数据）</p>
<p>➢ 分布呈指数分布、Weibull分布、对数正态分布、对数logistic分布等</p>
</div>
<div id="生存分析的主要任务" class="section level3" number="12.1.5">
<h3><span class="header-section-number">12.1.5</span> 生存分析的主要任务</h3>
<p>➢ 统计描述：</p>
<p>计算生存率、绘制生存率曲线、计算中位生存时间等。</p>
<p>➢ 统计推断：</p>
<p>估计总体生存率的可信区间、生存率曲线的比较。</p>
</div>
<div id="生存分析基本方法" class="section level3" number="12.1.6">
<h3><span class="header-section-number">12.1.6</span> 生存分析基本方法</h3>
<p>➢ 非参数法: 不论资料是什么样的分布类型，只根据样本提供的顺序统计量对生存率进行估计，常用乘积极限法和寿命表法。</p>
<p>➢ 参数法: 假定生存时间服从于特定的参数分布，根据已知分布的特点对影响生存的时间进行分析，常用指数分布法、Weibull分布法、对数正态回归分析法和对数Logistic回归分析法。</p>
<p>➢ 半参数法: 介于参数法和非参数法之间，一般属多因素分析方法，用于探讨生存过程的主要影响因素，其经典方法是Cox比例风险回归模型。</p>
</div>
<div id="随访研究的几个问题" class="section level3" number="12.1.7">
<h3><span class="header-section-number">12.1.7</span> 随访研究的几个问题</h3>
<div id="随访时间" class="section level4" number="12.1.7.1">
<h4><span class="header-section-number">12.1.7.1</span> 随访时间</h4>
<p>➢ <strong>1. 开始随访的时间：</strong></p>
<p>入(出)院时间、确诊时间、开始治疗时间等可作为随访开始的时间。如乳腺癌的乳腺切除术后第一天或出院日、白血病化疗后缓解出院日等，也可规定开始治疗日为随访开始时间。</p>
<p>➢ <strong>2. 随访结局和终止随访时间: </strong></p>
<p>随访的结局可能有以下几种：</p>
<ol style="list-style-type: decimal">
<li><p>死亡：泛指处理措施失败的事件。如肿瘤化疗后的复发、肾移植因肾衰或与之有关的原因而死亡等。终止随访时间为“死亡”时间。</p></li>
<li><p>失访：拒绝随访、失去联系或中途退出等。终止随访时间为最后一次时间。</p></li>
<li><p>死于与研究疾病无关的原因：终止随访时间为死亡时间。</p></li>
<li><p>研究终止。研究终止时观察对象仍然存活。终止随访时间为研究终止时间。</p></li>
</ol>
<p>➢ <strong>3. 影响生存的有关因素：</strong></p>
<p>如患者年龄、病情、病程、术前健康等情况，以便分析这些因素对生存率的影响。</p>
</div>
<div id="随访方式" class="section level4" number="12.1.7.2">
<h4><span class="header-section-number">12.1.7.2</span> 随访方式</h4>
<p><strong>1. 规定时点入组，统一分组，同一起点开始随访</strong></p>
<p>全部观察对象同时接受处理措施，观察到最后一例出现结果或事先规定的随访截止时间。</p>
<p><img src="fig/84.png" width="768" /></p>
<p><strong>2. 研究对象入组时间不定，随时入组，即刻随访</strong></p>
<p>观察对象在不同时间接受处理措施，完成一定数量随访病例或按事先规定的时间停止随访</p>
<p><img src="fig/85.png" width="768" /></p>
</div>
</div>
</div>
<div id="生存率的估计与生存曲线" class="section level2" number="12.2">
<h2><span class="header-section-number">12.2</span> 生存率的估计与生存曲线</h2>
<div id="kaplan-meier法" class="section level3" number="12.2.1">
<h3><span class="header-section-number">12.2.1</span> Kaplan-Meier法</h3>
<p>➢ 乘积极限法(product-limit estimate)又称Kaplan-Meier法，适用于分组生存资料的分析，需要<strong><em>已知每例患者的生存时间与状态</em></strong></p>
<p>【案例】14例膀胱肿瘤 &lt; 3.0cm患者和16例膀胱肿瘤 ≥3.0患者的生存时间（月）如下，试估计两组各时点生存率及其标准误、各时点总体生存率的95%可信区间、中位生存时间，并绘制生存曲线</p>
<p><img src="fig/86.png" width="976" /></p>
<p>[1]. 生存时间t：由小到大排列，遇非截尾和截尾值相同，截尾值排后。</p>
<p>[2]. 死亡数dt：与生存时间t对应。注意：截尾值对应的个体未发生“死亡”事件，故死亡数为0。</p>
<p>[3]. 期初病例数nt，表示恰好在该时刻以前的病例数。如n29为10，表示恰好在29月时点前有10人存活。</p>
<p>[4]. 死亡概率qt，表示t月前的观察对象恰好在t月时点死亡的概率。</p>
<p>[5]. 生存概率pt，表示t月前的观察对象恰好在t月时点存活的概率。</p>
<p>[6]. 生存率S(t)。表示该人群恰好活过t 时刻的概率。它为小于和等于 t 时刻的各时点生存概率的乘积。</p>
<p>[7]. 生存率的标准误SES(t) 。</p>
<p><span class="math display">\[
SE[S(t)]=\sqrt{\cfrac{1-S(t)}{n_t-d_t}}
\]</span></p>
<p>➢ <strong>总体生存率的可信区间计算</strong></p>
<p>假定生存率近似服从正态分布，某时点总体生存率的（1－a）％可信区间，公
式为：</p>
<p><span class="math display">\[
S(t) \pm u_{\alpha /2}SE[S(t)]
\]</span></p>
<p>本例28月总体生存率的95％可信区间：<span class="math inline">\(0.7144 \pm 1.96 \times 0.1207\)</span></p>
<p>即膀胱肿瘤&lt;3.0cm患者28月生存率的95%可信区间为47.78％~95.10%。生存曲线尾部的生存率不适合于用该法计算总体生存率的可信区间。</p>
<p>➢ <strong>中位生存时间计算: </strong></p>
<p>由表2可见，中位生存时间估计在36月。</p>
<p>采用线性内插法计算：找到与生存率50％相邻的上下两个生存率及其生存
时间，利用线性比例关系求解中位生存时间（后面有举例）。
若生存率0.5处所对应的曲线与X轴平行，则中位生存时间不止一个。</p>
<p><strong>若各时间点生存率均大于50％，则无法估计中位生存时间。</strong></p>
</div>
<div id="寿命表法" class="section level3" number="12.2.2">
<h3><span class="header-section-number">12.2.2</span> 寿命表法</h3>
<p>➢ 适用于<strong>未分组</strong>的生存资料，不需要知道每例患者的生存时间与状态。</p>
<p>①. 实际工作中，随访结果常常没有每个观察对象确切的生存时间，只能获得按随访时间分段的资料。</p>
<p>②. 当样本较大(如 n ≥ 50)时，采用乘积极限法估计生存率及其标准误往往较为繁琐。</p>
<p><img src="fig/87.png" width="610" /></p>
<p>➢ <strong>生存率的计算: </strong></p>
<ol style="list-style-type: decimal">
<li><p>确诊后年数t～：“0～”表示从确诊日起不满一年，“1～”表示确诊后1年至不满2年，依次类推。</p></li>
<li><p>期内死亡数dt ：指期内死于某恶性肿瘤的人数。</p></li>
<li><p>期内截尾数ct：泛指具有截尾数据的人，表示随访已满t年，但在未满t+1月期间失访的人。</p></li>
<li><p>期初观察例数n’t ：指时刻t以前的人数。</p></li>
<li><p>期初有效例数nt ：相当于实际观察人时数。在各年年初观察人数中减去同年截尾数的一半。</p></li>
<li><p>死亡概率qt，指活满t年的病人在t＋1年内死亡的的概率。</p></li>
<li><p>生存概率pt，指活满t年的病人在t＋1年内存活的概率。</p></li>
<li><p>生存率S(t)，表示活过t年的概率。它为小于和等于 t 时刻的各时点生存概
率的乘积。</p></li>
<li><p>生存率的标准误SES(t) 。</p></li>
</ol>
</div>
<div id="生存分析对生存资料的基本要求" class="section level3" number="12.2.3">
<h3><span class="header-section-number">12.2.3</span> 生存分析对生存资料的基本要求</h3>
<ol style="list-style-type: decimal">
<li><p>样本由随机抽样方法获得，并应有足够的数量；</p></li>
<li><p>死亡例数不能太少(≥30)；</p></li>
<li><p>截尾值比例不能太大；</p></li>
<li><p>生存时间尽可能精确到天数，因为多数生存分析方法都在生存时间排序的基础上作统计处理的，即使是小小的舍入误差，也可能改变生存时间顺序而影响结果。</p></li>
</ol>
</div>
<div id="kaplan-meier法估计案例" class="section level3" number="12.2.4">
<h3><span class="header-section-number">12.2.4</span> Kaplan-Meier法估计案例</h3>
<p>【案例】我们将使用<code>ISwR</code>包中包含的恶性黑色素瘤后的生存数据集(melanom)，该数据集信息如下</p>
<p><strong>描述</strong>：该数据集包含205行、7列，包含了患恶性黑色素瘤病人术后的生存数据，由 Odense 大学医院的K.T.Drzewiecki收集。</p>
<p><strong>用法</strong>：<code>melanom</code></p>
<p><strong>格式</strong>：该数据框包含如下列∶</p>
<p><code>no</code>: 数值向量，病人编号。</p>
<p><code>status</code>: 数值向量，编码表示生存状态</p>
<ul>
<li><p>1∶死于黑色素瘤</p></li>
<li><p>2∶存活</p></li>
<li><p>3∶死于其他原因</p></li>
</ul>
<p><code>days</code>: 数值向量，观测时间。</p>
<p><code>ulc</code>:数值向量编码， <code>ulceration</code>:</p>
<ul>
<li>1∶存在; 2∶缺失</li>
</ul>
<p><code>thick</code>: 数值向量，肿瘤厚度（1/100 mm）。</p>
<p><code>sex</code> 数值向量编码;</p>
<ul>
<li>1∶女性，2;男性。</li>
</ul>
<p><em>代码如下：</em></p>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="生存分析.html#cb412-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survival)</span>
<span id="cb412-2"><a href="生存分析.html#cb412-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ISwR)</span>
<span id="cb412-3"><a href="生存分析.html#cb412-3" aria-hidden="true" tabindex="-1"></a><span class="fu">attach</span>(melanom)</span>
<span id="cb412-4"><a href="生存分析.html#cb412-4" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(melanom)</span></code></pre></div>
<pre><code>## [1] &quot;no&quot;     &quot;status&quot; &quot;days&quot;   &quot;ulc&quot;    &quot;thick&quot;  &quot;sex&quot;</code></pre>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="生存分析.html#cb414-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Surv</span>(days, status<span class="sc">==</span><span class="dv">1</span>) <span class="co">#定义资料中的终点</span></span></code></pre></div>
<pre><code>##   [1]   10+   30+   35+   99+  185   204   210   232   232+  279   295   355+
##  [13]  386   426   469   493+  529   621   629   659   667   718   752   779 
##  [25]  793   817   826+  833   858   869   872   967   977   982  1041  1055 
##  [37] 1062  1075  1156  1228  1252  1271  1312  1427+ 1435  1499+ 1506  1508+
##  [49] 1510+ 1512+ 1516  1525+ 1542+ 1548  1557+ 1560  1563+ 1584  1605+ 1621 
##  [61] 1627+ 1634+ 1641+ 1641+ 1648+ 1652+ 1654+ 1654+ 1667  1678+ 1685+ 1690 
##  [73] 1710+ 1710+ 1726  1745+ 1762+ 1779+ 1787+ 1787+ 1793+ 1804+ 1812+ 1836+
##  [85] 1839+ 1839+ 1854+ 1856+ 1860+ 1864+ 1899+ 1914+ 1919+ 1920+ 1927+ 1933 
##  [97] 1942+ 1955+ 1956+ 1958+ 1963+ 1970+ 2005+ 2007+ 2011+ 2024+ 2028+ 2038+
## [109] 2056+ 2059+ 2061  2062  2075+ 2085+ 2102+ 2103  2104+ 2108  2112+ 2150+
## [121] 2156+ 2165+ 2209+ 2227+ 2227+ 2256  2264+ 2339+ 2361+ 2387+ 2388  2403+
## [133] 2426+ 2426+ 2431+ 2460+ 2467  2492+ 2493+ 2521+ 2542+ 2559+ 2565  2570+
## [145] 2660+ 2666+ 2676+ 2738+ 2782  2787+ 2984+ 3032+ 3040+ 3042  3067+ 3079+
## [157] 3101+ 3144+ 3152+ 3154+ 3180+ 3182+ 3185+ 3199+ 3228+ 3229+ 3278+ 3297+
## [169] 3328+ 3330+ 3338  3383+ 3384+ 3385+ 3388+ 3402+ 3441+ 3458+ 3459+ 3459+
## [181] 3476+ 3523+ 3667+ 3695+ 3695+ 3776+ 3776+ 3830+ 3856+ 3872+ 3909+ 3968+
## [193] 4001+ 4103+ 4119+ 4124+ 4207+ 4310+ 4390+ 4479+ 4492+ 4668+ 4688+ 4926+
## [205] 5565+</code></pre>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="生存分析.html#cb416-1" aria-hidden="true" tabindex="-1"></a><span class="fu">survfit</span>(<span class="fu">Surv</span>(days, status<span class="sc">==</span><span class="dv">1</span>)<span class="sc">~</span><span class="dv">1</span>)<span class="co">#将其拟合，可以看到简要的信息</span></span></code></pre></div>
<pre><code>## Call: survfit(formula = Surv(days, status == 1) ~ 1)
## 
##        n events median 0.95LCL 0.95UCL
## [1,] 205     57     NA      NA      NA</code></pre>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="生存分析.html#cb418-1" aria-hidden="true" tabindex="-1"></a>surv.all <span class="ot">&lt;-</span> <span class="fu">survfit</span>(<span class="fu">Surv</span>(days,status<span class="sc">==</span><span class="dv">1</span>)<span class="sc">~</span><span class="dv">1</span>)</span>
<span id="cb418-2"><a href="生存分析.html#cb418-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(surv.all)</span></code></pre></div>
<pre><code>## Call: survfit(formula = Surv(days, status == 1) ~ 1)
## 
##  time n.risk n.event survival std.err lower 95% CI upper 95% CI
##   185    201       1    0.995 0.00496        0.985        1.000
##   204    200       1    0.990 0.00700        0.976        1.000
##   210    199       1    0.985 0.00855        0.968        1.000
##   232    198       1    0.980 0.00985        0.961        1.000
##   279    196       1    0.975 0.01100        0.954        0.997
##   295    195       1    0.970 0.01202        0.947        0.994
##   386    193       1    0.965 0.01297        0.940        0.991
##   426    192       1    0.960 0.01384        0.933        0.988
##   469    191       1    0.955 0.01465        0.927        0.984
##   529    189       1    0.950 0.01542        0.920        0.981
##   621    188       1    0.945 0.01615        0.914        0.977
##   629    187       1    0.940 0.01683        0.907        0.973
##   659    186       1    0.935 0.01748        0.901        0.970
##   667    185       1    0.930 0.01811        0.895        0.966
##   718    184       1    0.925 0.01870        0.889        0.962
##   752    183       1    0.920 0.01927        0.883        0.958
##   779    182       1    0.915 0.01981        0.877        0.954
##   793    181       1    0.910 0.02034        0.871        0.950
##   817    180       1    0.904 0.02084        0.865        0.946
##   833    178       1    0.899 0.02134        0.859        0.942
##   858    177       1    0.894 0.02181        0.853        0.938
##   869    176       1    0.889 0.02227        0.847        0.934
##   872    175       1    0.884 0.02272        0.841        0.930
##   967    174       1    0.879 0.02315        0.835        0.926
##   977    173       1    0.874 0.02357        0.829        0.921
##   982    172       1    0.869 0.02397        0.823        0.917
##  1041    171       1    0.864 0.02436        0.817        0.913
##  1055    170       1    0.859 0.02474        0.812        0.909
##  1062    169       1    0.854 0.02511        0.806        0.904
##  1075    168       1    0.849 0.02547        0.800        0.900
##  1156    167       1    0.844 0.02582        0.794        0.896
##  1228    166       1    0.838 0.02616        0.789        0.891
##  1252    165       1    0.833 0.02649        0.783        0.887
##  1271    164       1    0.828 0.02681        0.777        0.883
##  1312    163       1    0.823 0.02713        0.772        0.878
##  1435    161       1    0.818 0.02744        0.766        0.874
##  1506    159       1    0.813 0.02774        0.760        0.869
##  1516    155       1    0.808 0.02805        0.755        0.865
##  1548    152       1    0.802 0.02837        0.749        0.860
##  1560    150       1    0.797 0.02868        0.743        0.855
##  1584    148       1    0.792 0.02899        0.737        0.851
##  1621    146       1    0.786 0.02929        0.731        0.846
##  1667    137       1    0.780 0.02963        0.725        0.841
##  1690    134       1    0.775 0.02998        0.718        0.836
##  1726    131       1    0.769 0.03033        0.712        0.831
##  1933    110       1    0.762 0.03085        0.704        0.825
##  2061     95       1    0.754 0.03155        0.694        0.818
##  2062     94       1    0.746 0.03221        0.685        0.812
##  2103     90       1    0.737 0.03290        0.676        0.805
##  2108     88       1    0.729 0.03358        0.666        0.798
##  2256     80       1    0.720 0.03438        0.656        0.791
##  2388     75       1    0.710 0.03523        0.645        0.783
##  2467     69       1    0.700 0.03619        0.633        0.775
##  2565     63       1    0.689 0.03729        0.620        0.766
##  2782     57       1    0.677 0.03854        0.605        0.757
##  3042     52       1    0.664 0.03994        0.590        0.747
##  3338     35       1    0.645 0.04307        0.566        0.735</code></pre>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="生存分析.html#cb420-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(surv.all,<span class="at">col=</span><span class="st">&quot;#009999&quot;</span>)<span class="co">#绘制带可信区间的生存曲线</span></span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-117-1.png" width="672" /></p>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="生存分析.html#cb421-1" aria-hidden="true" tabindex="-1"></a><span class="co">#拟合以性别作为分组的函数</span></span>
<span id="cb421-2"><a href="生存分析.html#cb421-2" aria-hidden="true" tabindex="-1"></a>surv.bysex <span class="ot">&lt;-</span> <span class="fu">survfit</span>(<span class="fu">Surv</span>(days,status<span class="sc">==</span><span class="dv">1</span>)<span class="sc">~</span>sex)</span>
<span id="cb421-3"><a href="生存分析.html#cb421-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(surv.bysex)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-117-2.png" width="672" /></p>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="生存分析.html#cb422-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(surv.bysex, <span class="at">conf.int=</span>T, <span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;#3399CC&quot;</span>,<span class="st">&quot;#FF0099&quot;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-117-3.png" width="672" /></p>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="生存分析.html#cb423-1" aria-hidden="true" tabindex="-1"></a><span class="co">#画出的生存曲线过于凌乱，我们可以隐藏可信区间</span></span>
<span id="cb423-2"><a href="生存分析.html#cb423-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(surv.bysex, <span class="at">conf.int=</span>F, <span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;#3399CC&quot;</span>,<span class="st">&quot;#FF0099&quot;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-117-4.png" width="672" /></p>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="生存分析.html#cb424-1" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(melanom)</span></code></pre></div>
</div>
<div id="lifetable寿命表法" class="section level3" number="12.2.5">
<h3><span class="header-section-number">12.2.5</span> LifeTable寿命表法</h3>
<p>➢ 【案例】某医生比较两种药物治疗HIV感染患者后的生存时间t(月)，试用寿命表
法分析患者生存时间</p>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="生存分析.html#cb425-1" aria-hidden="true" tabindex="-1"></a>hmohiv<span class="ot">&lt;-</span><span class="fu">read.table</span>(<span class="st">&quot;data/hmohiv.csv&quot;</span>, <span class="at">sep=</span><span class="st">&quot;,&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb425-2"><a href="生存分析.html#cb425-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attach</span>(hmohiv)</span></code></pre></div>
<pre><code>## The following object is masked from mydata (pos = 10):
## 
##     age</code></pre>
<pre><code>## The following object is masked from mydata (pos = 11):
## 
##     age</code></pre>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="生存分析.html#cb428-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(hmohiv)</span></code></pre></div>
<pre><code>##   锘縩o   entdate   enddate time age drug censor
## 1     1 15-May-90 14-Oct-90    5  46    0      1
## 2     2 19-Sep-89 20-Mar-90    6  35    1      0
## 3     3 21-Apr-91 20-Dec-91    8  30    1      1
## 4     4  3-Jan-91  4-Apr-91    3  30    1      1
## 5     5 18-Sep-89 19-Jul-91   22  36    0      1
## 6     6 18-Mar-91 17-Apr-91    1  32    1      0</code></pre>
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb430-1"><a href="生存分析.html#cb430-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(KMsurv)</span>
<span id="cb430-2"><a href="生存分析.html#cb430-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nlme)</span>
<span id="cb430-3"><a href="生存分析.html#cb430-3" aria-hidden="true" tabindex="-1"></a>t6m<span class="ot">&lt;-</span><span class="fu">floor</span>(time<span class="sc">/</span><span class="dv">6</span>)</span>
<span id="cb430-4"><a href="生存分析.html#cb430-4" aria-hidden="true" tabindex="-1"></a>tall<span class="ot">&lt;-</span><span class="fu">data.frame</span>(t6m, censor)</span>
<span id="cb430-5"><a href="生存分析.html#cb430-5" aria-hidden="true" tabindex="-1"></a>die<span class="ot">&lt;-</span><span class="fu">gsummary</span>(tall, sum, <span class="at">groups=</span>t6m)<span class="co">#分组</span></span>
<span id="cb430-6"><a href="生存分析.html#cb430-6" aria-hidden="true" tabindex="-1"></a>total<span class="ot">&lt;-</span><span class="fu">gsummary</span>(tall, length, <span class="at">groups=</span>t6m)</span>
<span id="cb430-7"><a href="生存分析.html#cb430-7" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(t6m)</span>
<span id="cb430-8"><a href="生存分析.html#cb430-8" aria-hidden="true" tabindex="-1"></a>ltab.data<span class="ot">&lt;-</span><span class="fu">cbind</span>(die[,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>], total[,<span class="dv">2</span>])</span>
<span id="cb430-9"><a href="生存分析.html#cb430-9" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(hmohiv)</span>
<span id="cb430-10"><a href="生存分析.html#cb430-10" aria-hidden="true" tabindex="-1"></a><span class="fu">attach</span>(ltab.data)</span>
<span id="cb430-11"><a href="生存分析.html#cb430-11" aria-hidden="true" tabindex="-1"></a>lt<span class="ot">=</span><span class="fu">length</span>(t6m)</span>
<span id="cb430-12"><a href="生存分析.html#cb430-12" aria-hidden="true" tabindex="-1"></a>t6m[lt<span class="sc">+</span><span class="dv">1</span>]<span class="ot">=</span><span class="cn">NA</span></span>
<span id="cb430-13"><a href="生存分析.html#cb430-13" aria-hidden="true" tabindex="-1"></a>nevent<span class="ot">=</span>censor</span>
<span id="cb430-14"><a href="生存分析.html#cb430-14" aria-hidden="true" tabindex="-1"></a>nlost<span class="ot">=</span>total[,<span class="dv">2</span>] <span class="sc">-</span> censor</span>
<span id="cb430-15"><a href="生存分析.html#cb430-15" aria-hidden="true" tabindex="-1"></a>mytable<span class="ot">&lt;-</span><span class="fu">lifetab</span>(t6m, <span class="dv">100</span>, nlost, nevent)</span>
<span id="cb430-16"><a href="生存分析.html#cb430-16" aria-hidden="true" tabindex="-1"></a>mytable[,<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code></pre></div>
<pre><code>##       nsubs nlost nrisk nevent       surv
## 0-1     100    10  95.0     41 1.00000000
## 1-2      49     3  47.5     21 0.56842105
## 2-3      25     2  24.0      6 0.31711911
## 3-4      17     1  16.5      1 0.23783934
## 4-5      15     1  14.5      0 0.22342483
## 5-6      14     0  14.0      5 0.22342483
## 6-7       9     0   9.0      1 0.14363025
## 7-8       8     0   8.0      1 0.12767133
## 8-9       7     0   7.0      1 0.11171242
## 9-10      6     1   5.5      3 0.09575350
## 10-NA     2     2   1.0      0 0.04352432</code></pre>
<div class="sourceCode" id="cb432"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb432-1"><a href="生存分析.html#cb432-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(t6m[<span class="dv">1</span><span class="sc">:</span><span class="dv">11</span>], mytable[,<span class="dv">5</span>], <span class="at">type=</span><span class="st">&quot;s&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;Survival time in every 6 month&quot;</span>, </span>
<span id="cb432-2"><a href="生存分析.html#cb432-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab=</span><span class="st">&quot;Proportion Surviving&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-118-1.png" width="672" /></p>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="生存分析.html#cb433-1" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(ltab.data)</span></code></pre></div>
<p>这段代码与分析结果又臭又长，很不好理解。但是实际上在临床中将数据收集成寿命表形式是一个非常愚蠢的行为，这段代码大部分精力都集中于如何将原始数据转换为寿命表，所以没有什么掌握的必要，看看就好，提醒自己不要做这种愚蠢的事情。如果真的做了，可以投入SPSS的怀抱，比用R语言好的多（大概他们做包的时候没有想到会有这么蠢的人）。</p>
</div>
</div>
<div id="组间生存曲线的比较" class="section level2" number="12.3">
<h2><span class="header-section-number">12.3</span> 组间生存曲线的比较</h2>
<div id="log-rank检验" class="section level3" number="12.3.1">
<h3><span class="header-section-number">12.3.1</span> Log-rank检验</h3>
<p>➢ 对数秩检验，非参数检验法，其零假设为两总体生存曲线相同，但检验过程一
般不估计生存率，而利用死亡数和死亡率函数作统计推断。</p>
<p>➢ 基本思想：当<span class="math inline">\(H_0\)</span>成立时，根据t时点的死亡率，计算出各组的理论死亡数，则
检验统计量：</p>
<p><span class="math display">\[
\chi^2 = \cfrac{(A_g-T_g)^2}{V_g} 
\quad 
\quad 
V_g= \sum \cfrac{n_{gi}}{ni}(1-\cfrac{n_{gi}}{ni})(\cfrac{n_i-d_i}{n_i-1})d_i
\]</span></p>
<p>亦可用公式： <span class="math inline">\(\chi^2=\sum \cfrac{(A-T)^2}{T}\)</span>
检验统计量<span class="math inline">\(\chi^2\)</span>近似服从<span class="math inline">\(v=(组数-1)\)</span>的<span class="math inline">\(\chi^2\)</span>分布</p>
<p>➢ Log-rank检验应用及注意事项：</p>
<p>[1]. 相对死亡比（relative death ratio）：实际死亡数A与理论死亡数T之比，
则相对危险度（relative risk , RR）估计值为两组相对死亡比率之比。</p>
<p><span class="math display">\[
RR=\cfrac{R_1}{R_2}=\cfrac{A_1 / T_1}{A2/T2}
\]</span></p>
<p>[2]. log-rank检验：用于整条生存曲线的比较，若比较两条生存曲线某时点的
生存率，如2年生存率，按下式:</p>
<p><span class="math display">\[
u=\cfrac{S_1(t)-S_2(t)}{\sqrt{SE^2[S_1(t)]+SE^2[S_2(t)]}}
\]</span></p>
<p>[3]. 若比较多个时点生存率，检验水准应取Bonferroni校正，即<span class="math inline">\(\alpha&#39;=\alpha/k\)</span>其中k为比较次数，以保证总的Ⅰ型错误概率不超过α。</p>
<p>[4]. log-rank检验：单因素分析，应用条件是除比较因素外，影响生存率的各混杂因素组间均衡可比，否则采用Cox比例风险回归模型。</p>
<p>[5]. 对数秩检验也可用于三组生存曲线的比较。</p>
<p>[6]. 由对数秩检验过程可知，若每一时点A组死亡率都高一点(生存率低一点)，则检验结果必然为A不同于B。因此，在比较的两条生存率曲线无交叉时，直接用对数秩检验是合适的。反之，就需进一步分析原因，了解是否存在混杂因素的影响。</p>
</div>
<div id="案例1-4" class="section level3" number="12.3.2">
<h3><span class="header-section-number">12.3.2</span> 案例1</h3>
<p>例 观察两组卵巢腺癌患者的病程天数如下。请用乘积极限法进行描述，并比较两组的生存期差异有无统计学意义，并作生存率曲线。如表15-2 所示。</p>
<p><img src="fig/88.png" width="600" /></p>
<pre><code>#install.packages(&quot;survival&quot;)
library(survival)
example15_3 &lt;- read.table (&quot;data/example15_3.csv&quot;, header=TRUE, sep=&quot;,&quot;)
attach(example15_3)
t1&lt;-as.numeric(example15_3$t)
total &lt;- survfit(Surv(t1, censor)~1)
summary(total)
plot(total,conf.int = F)
separate &lt;- survfit(Surv(t1, censor)~group)
summary(separate)
plot(separate, lty = c(&#39;solid&#39;,&#39;dashed&#39;), col=c(&#39;black&#39;,&#39;blue&#39;),
     xlab=&#39;survival time in days&#39;,ylab=&#39;survival probabilities&#39;)
legend(&#39;topright&#39;, c(&#39;Group A&#39;,&#39; Group B&#39;), lty=c(&#39;solid&#39;,&#39;dashed&#39;),
       col=c(&#39;black&#39;,&#39;blue&#39;))
survdiff(Surv(t1, censor)~group)
survdiff(Surv(t1, censor)~group,rho=1) 
# rho = 1 it is equivalent to the Peto &amp; Peto modification of the Gehan-Wilcoxon test.</code></pre>
</div>
<div id="案例2-2" class="section level3" number="12.3.3">
<h3><span class="header-section-number">12.3.3</span> 案例2</h3>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="生存分析.html#cb435-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(coin)</span>
<span id="cb435-2"><a href="生存分析.html#cb435-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(glioma)</span>
<span id="cb435-3"><a href="生存分析.html#cb435-3" aria-hidden="true" tabindex="-1"></a><span class="fu">attach</span>(glioma)</span>
<span id="cb435-4"><a href="生存分析.html#cb435-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survival)</span>
<span id="cb435-5"><a href="生存分析.html#cb435-5" aria-hidden="true" tabindex="-1"></a>g3 <span class="ot">&lt;-</span> <span class="fu">subset</span>(glioma, histology <span class="sc">==</span><span class="st">&#39;Grade3&#39;</span>)<span class="co">#取亚集</span></span>
<span id="cb435-6"><a href="生存分析.html#cb435-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb435-7"><a href="生存分析.html#cb435-7" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">survfit</span>(<span class="fu">Surv</span>(time, event)<span class="sc">~</span>group,<span class="at">data =</span> g3)</span>
<span id="cb435-8"><a href="生存分析.html#cb435-8" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(fit, <span class="at">lty =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>), <span class="at">col =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))</span>
<span id="cb435-9"><a href="生存分析.html#cb435-9" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">&#39;bottomright&#39;</span>, <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">&#39;Control&#39;</span>,<span class="st">&#39;Treatment&#39;</span>), <span class="at">lty =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>), <span class="at">col =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-120-1.png" width="672" /></p>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb436-1"><a href="生存分析.html#cb436-1" aria-hidden="true" tabindex="-1"></a><span class="fu">survdiff</span>(<span class="fu">Surv</span>(time, event)<span class="sc">~</span>group,<span class="at">data =</span> g3)</span></code></pre></div>
<pre><code>## Call:
## survdiff(formula = Surv(time, event) ~ group, data = g3)
## 
##                N Observed Expected (O-E)^2/E (O-E)^2/V
## group=Control  6        4     1.49      4.23      6.06
## group=RIT     11        2     4.51      1.40      6.06
## 
##  Chisq= 6.1  on 1 degrees of freedom, p= 0.01</code></pre>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb438-1"><a href="生存分析.html#cb438-1" aria-hidden="true" tabindex="-1"></a><span class="fu">logrank_test</span>(<span class="fu">Surv</span>(time, event)<span class="sc">~</span>group,<span class="at">data =</span> g3, <span class="at">distribution =</span><span class="st">&quot;exact&quot;</span>)</span></code></pre></div>
<pre><code>## 
##  Exact Two-Sample Logrank Test
## 
## data:  Surv(time, event) by group (Control, RIT)
## Z = -2.1711, p-value = 0.02877
## alternative hypothesis: true theta is not equal to 1</code></pre>
<div class="sourceCode" id="cb440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb440-1"><a href="生存分析.html#cb440-1" aria-hidden="true" tabindex="-1"></a><span class="fu">logrank_test</span>(<span class="fu">Surv</span>(time, event)<span class="sc">~</span>group<span class="sc">|</span>histology,<span class="at">data =</span> glioma, <span class="at">distribution =</span> <span class="fu">approximate</span>(<span class="at">B =</span> <span class="dv">1000</span>)) <span class="co">#两组比较,coin包 logrank_test函数#SurvivalTests {coin}</span></span></code></pre></div>
<pre><code>## Warning in approximate(B = 1000): &#39;B&#39; is deprecated; use &#39;nresample&#39; instead</code></pre>
<pre><code>## 
##  Approximative Two-Sample Logrank Test
## 
## data:  Surv(time, event) by
##   group (Control, RIT) 
##   stratified by histology
## Z = -3.6704, p-value &lt; 0.001
## alternative hypothesis: true theta is not equal to 1</code></pre>
</div>
</div>
<div id="画一幅高水准的生存曲线" class="section level2" number="12.4">
<h2><span class="header-section-number">12.4</span> 画一幅高水准的生存曲线</h2>
<div class="sourceCode" id="cb443"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb443-1"><a href="生存分析.html#cb443-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survminer)</span>
<span id="cb443-2"><a href="生存分析.html#cb443-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survival)</span>
<span id="cb443-3"><a href="生存分析.html#cb443-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb443-4"><a href="生存分析.html#cb443-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(coin)</span>
<span id="cb443-5"><a href="生存分析.html#cb443-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(glioma)</span>
<span id="cb443-6"><a href="生存分析.html#cb443-6" aria-hidden="true" tabindex="-1"></a><span class="fu">attach</span>(glioma)</span>
<span id="cb443-7"><a href="生存分析.html#cb443-7" aria-hidden="true" tabindex="-1"></a>g3 <span class="ot">&lt;-</span> <span class="fu">subset</span>(glioma, histology <span class="sc">==</span><span class="st">&#39;Grade3&#39;</span>)</span>
<span id="cb443-8"><a href="生存分析.html#cb443-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb443-9"><a href="生存分析.html#cb443-9" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">survfit</span>(<span class="fu">Surv</span>(time, event)<span class="sc">~</span>group,<span class="at">data =</span> g3)</span>
<span id="cb443-10"><a href="生存分析.html#cb443-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb443-11"><a href="生存分析.html#cb443-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsurvplot</span>(fit,</span>
<span id="cb443-12"><a href="生存分析.html#cb443-12" aria-hidden="true" tabindex="-1"></a>           <span class="at">pval =</span> <span class="cn">TRUE</span>, <span class="co"># 在图上添加log rank检验的p值</span></span>
<span id="cb443-13"><a href="生存分析.html#cb443-13" aria-hidden="true" tabindex="-1"></a>           <span class="at">conf.int =</span> <span class="cn">TRUE</span>,<span class="co"># 添加置信区间</span></span>
<span id="cb443-14"><a href="生存分析.html#cb443-14" aria-hidden="true" tabindex="-1"></a>           <span class="at">risk.table =</span> <span class="cn">TRUE</span>, <span class="co"># 在图下方添加风险表</span></span>
<span id="cb443-15"><a href="生存分析.html#cb443-15" aria-hidden="true" tabindex="-1"></a>           <span class="at">risk.table.col =</span> <span class="st">&quot;strata&quot;</span>, <span class="co"># 根据数据分组为风险表添加颜色</span></span>
<span id="cb443-16"><a href="生存分析.html#cb443-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">linetype =</span> <span class="st">&quot;strata&quot;</span>, <span class="co"># 改变不同组别的生存曲线的线型</span></span>
<span id="cb443-17"><a href="生存分析.html#cb443-17" aria-hidden="true" tabindex="-1"></a>           <span class="at">surv.median.line =</span> <span class="st">&quot;hv&quot;</span>, <span class="co"># 标注出中位生存时间</span></span>
<span id="cb443-18"><a href="生存分析.html#cb443-18" aria-hidden="true" tabindex="-1"></a>           <span class="at">ggtheme =</span> <span class="fu">theme_bw</span>(), <span class="co"># 改变图形风格</span></span>
<span id="cb443-19"><a href="生存分析.html#cb443-19" aria-hidden="true" tabindex="-1"></a>           <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">&quot;#E7B800&quot;</span>, <span class="st">&quot;#2E9FDF&quot;</span>)) <span class="co"># 图形颜色风格</span></span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-121-1.png" width="672" /></p>
<div class="sourceCode" id="cb444"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb444-1"><a href="生存分析.html#cb444-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsurvplot</span>(</span>
<span id="cb444-2"><a href="生存分析.html#cb444-2" aria-hidden="true" tabindex="-1"></a>  fit,</span>
<span id="cb444-3"><a href="生存分析.html#cb444-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">pval =</span> <span class="cn">FALSE</span>,</span>
<span id="cb444-4"><a href="生存分析.html#cb444-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">conf.int =</span> <span class="cn">TRUE</span>,</span>
<span id="cb444-5"><a href="生存分析.html#cb444-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">fun =</span> <span class="st">&quot;cumhaz&quot;</span>,</span>
<span id="cb444-6"><a href="生存分析.html#cb444-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">conf.int.style =</span> <span class="st">&quot;ribbon&quot;</span>,  <span class="co"># 设置置信区间的风格</span></span>
<span id="cb444-7"><a href="生存分析.html#cb444-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">xlab =</span> <span class="st">&quot;Time in days&quot;</span>,   <span class="co"># 设置x轴标签</span></span>
<span id="cb444-8"><a href="生存分析.html#cb444-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">break.time.by =</span> <span class="dv">20</span>,     <span class="co"># 将x轴按照20为间隔进行切分</span></span>
<span id="cb444-9"><a href="生存分析.html#cb444-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">ggtheme =</span> <span class="fu">theme_light</span>(), <span class="co"># 设置图形风格</span></span>
<span id="cb444-10"><a href="生存分析.html#cb444-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">risk.table =</span> <span class="st">&quot;abs_pct&quot;</span>,  <span class="co"># 在风险表中添加绝对数和相对数</span></span>
<span id="cb444-11"><a href="生存分析.html#cb444-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">risk.table.y.text.col =</span> <span class="cn">TRUE</span>,<span class="co"># 设置风险表的文字颜色</span></span>
<span id="cb444-12"><a href="生存分析.html#cb444-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">risk.table.y.text =</span> <span class="cn">FALSE</span>,<span class="co"># 以条柱展示风险表的标签，而非文字</span></span>
<span id="cb444-13"><a href="生存分析.html#cb444-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">ncensor.plot =</span> <span class="cn">TRUE</span>,      <span class="co"># 展示随访过程中不同时间点死亡和删失的情况</span></span>
<span id="cb444-14"><a href="生存分析.html#cb444-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">surv.median.line =</span> <span class="st">&quot;hv&quot;</span>,  <span class="co"># 添加中位生存时间</span></span>
<span id="cb444-15"><a href="生存分析.html#cb444-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.labs =</span></span>
<span id="cb444-16"><a href="生存分析.html#cb444-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>),    <span class="co"># 改变图例标签</span></span>
<span id="cb444-17"><a href="生存分析.html#cb444-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">palette =</span></span>
<span id="cb444-18"><a href="生存分析.html#cb444-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">&quot;#FF6666&quot;</span>, <span class="st">&quot;#33CC66&quot;</span>) <span class="co"># 设置颜色</span></span>
<span id="cb444-19"><a href="生存分析.html#cb444-19" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## Warning in .add_surv_median(p, fit, type = surv.median.line, fun = fun, : Adding
## survival median lines is not allowed when fun is: cumhaz</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-122-1.png" width="672" /></p>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="生存分析.html#cb446-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsurvplot</span>(fit,</span>
<span id="cb446-2"><a href="生存分析.html#cb446-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">conf.int =</span> <span class="cn">TRUE</span>,</span>
<span id="cb446-3"><a href="生存分析.html#cb446-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">risk.table.col =</span> <span class="st">&quot;strata&quot;</span>,</span>
<span id="cb446-4"><a href="生存分析.html#cb446-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">ggtheme =</span> <span class="fu">theme_bw</span>(),</span>
<span id="cb446-5"><a href="生存分析.html#cb446-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">&quot;#009999&quot;</span>, <span class="st">&quot;#CCCC00&quot;</span>),</span>
<span id="cb446-6"><a href="生存分析.html#cb446-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">fun =</span> <span class="st">&quot;cumhaz&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-123-1.png" width="672" /></p>
<div class="sourceCode" id="cb447"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb447-1"><a href="生存分析.html#cb447-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<pre><code>## null device 
##           1</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="泊松回归模型.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="cox比例风险模型.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/010-survival.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
